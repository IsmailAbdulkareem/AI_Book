"use strict";(globalThis.webpackChunkphysical_ai_robotics_book=globalThis.webpackChunkphysical_ai_robotics_book||[]).push([[321],{6038:(n,e,o)=>{o.r(e),o.d(e,{assets:()=>a,contentTitle:()=>s,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"module2/module2-chapter2","title":"Chapter 2: Robot Control in Gazebo","description":"Type: Practice-Heavy","source":"@site/docs/module2/chapter-2-robot-control.md","sourceDirName":"module2","slug":"/module2/module2-chapter2","permalink":"/docs/module2/module2-chapter2","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"module2-chapter2","title":"Chapter 2: Robot Control in Gazebo","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Chapter 1: Gazebo Simulation Basics","permalink":"/docs/module2/module2-chapter1"},"next":{"title":"Chapter 3: Unity Integration for Visualization","permalink":"/docs/module2/module2-chapter3"}}');var t=o(4848),i=o(8453);const l={id:"module2-chapter2",title:"Chapter 2: Robot Control in Gazebo",sidebar_position:2},s="Chapter 2: Robot Control in Gazebo",a={},c=[{value:"Chapter Overview",id:"chapter-overview",level:2},{value:"Controlling Joints",id:"controlling-joints",level:2},{value:"Direct Topic Control",id:"direct-topic-control",level:3},{value:"Using Command Line",id:"using-command-line",level:3},{value:"ros2_control Integration",id:"ros2_control-integration",level:2},{value:"Basic ros2_control Setup",id:"basic-ros2_control-setup",level:3},{value:"Control Modes",id:"control-modes",level:2},{value:"Position Control",id:"position-control",level:3},{value:"Velocity Control",id:"velocity-control",level:3},{value:"Effort Control",id:"effort-control",level:3},{value:"Mobile Base Control",id:"mobile-base-control",level:2},{value:"Differential Drive",id:"differential-drive",level:3},{value:"Gazebo Plugin",id:"gazebo-plugin",level:3},{value:"Manipulator Control",id:"manipulator-control",level:2},{value:"Joint Trajectory Controller",id:"joint-trajectory-controller",level:3},{value:"Chapter Projects",id:"chapter-projects",level:2},{value:"Project 1: Simple Joint Control",id:"project-1-simple-joint-control",level:3},{value:"Project 2: ros2_control Setup",id:"project-2-ros2_control-setup",level:3},{value:"Project 3: Mobile Base Navigation",id:"project-3-mobile-base-navigation",level:3},{value:"Project 4: Arm Manipulation",id:"project-4-arm-manipulation",level:3},{value:"Chapter Summary",id:"chapter-summary",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(n){const e={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"chapter-2-robot-control-in-gazebo",children:"Chapter 2: Robot Control in Gazebo"})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Type"}),": Practice-Heavy",(0,t.jsx)(e.br,{}),"\n",(0,t.jsx)(e.strong,{children:"Lessons"}),": 6",(0,t.jsx)(e.br,{}),"\n",(0,t.jsx)(e.strong,{children:"Duration"}),": 12-14 hours"]}),"\n",(0,t.jsx)(e.h2,{id:"chapter-overview",children:"Chapter Overview"}),"\n",(0,t.jsx)(e.p,{children:"This chapter teaches you how to control robots in Gazebo using ROS 2. You'll learn to control joints, move robots, and integrate with ros2_control for advanced control systems."}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"By the end of this chapter, you will"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Control robot joints via ROS 2 topics"}),"\n",(0,t.jsx)(e.li,{children:"Use ros2_control for hardware abstraction"}),"\n",(0,t.jsx)(e.li,{children:"Implement basic locomotion controllers"}),"\n",(0,t.jsx)(e.li,{children:"Control manipulator arms"}),"\n",(0,t.jsx)(e.li,{children:"Understand the difference between position, velocity, and effort control"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"controlling-joints",children:"Controlling Joints"}),"\n",(0,t.jsx)(e.h3,{id:"direct-topic-control",children:"Direct Topic Control"}),"\n",(0,t.jsx)(e.p,{children:"Simple robots can be controlled by publishing directly to joint command topics:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import Float64\n\nclass JointController(Node):\n    def __init__(self):\n        super().__init__('joint_controller')\n        self.publisher = self.create_publisher(\n            Float64,\n            '/joint1/command',\n            10\n        )\n        timer_period = 0.1\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.angle = 0.0\n    \n    def timer_callback(self):\n        msg = Float64()\n        msg.data = self.angle\n        self.publisher.publish(msg)\n        self.angle += 0.1\n        if self.angle > 1.57:\n            self.angle = -1.57\n"})}),"\n",(0,t.jsx)(e.h3,{id:"using-command-line",children:"Using Command Line"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:'# Publish joint command\nros2 topic pub /joint1/command std_msgs/msg/Float64 "data: 0.5"\n'})}),"\n",(0,t.jsx)(e.h2,{id:"ros2_control-integration",children:"ros2_control Integration"}),"\n",(0,t.jsx)(e.p,{children:"ros2_control provides hardware abstraction and standardized control interfaces."}),"\n",(0,t.jsx)(e.h3,{id:"basic-ros2_control-setup",children:"Basic ros2_control Setup"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"1. Add ros2_control tags to URDF"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-xml",children:'<ros2_control name="GazeboSystem" type="system">\n  <hardware>\n    <plugin>gazebo_ros2_control/GazeboSystem</plugin>\n  </hardware>\n  \n  <joint name="joint1">\n    <command_interface name="position">\n      <param name="min">-1.57</param>\n      <param name="max">1.57</param>\n    </command_interface>\n    <state_interface name="position"/>\n    <state_interface name="velocity"/>\n  </joint>\n</ros2_control>\n'})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"2. Add Gazebo plugin"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-xml",children:'<gazebo>\n  <plugin filename="libgazebo_ros2_control.so" name="gazebo_ros2_control">\n    <parameters>$(find my_robot)/config/controllers.yaml</parameters>\n  </plugin>\n</gazebo>\n'})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"3. Create controllers configuration"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"controller_manager:\n  ros__parameters:\n    update_rate: 100  # Hz\n    \n    joint_state_broadcaster:\n      type: joint_state_broadcaster/JointStateBroadcaster\n    \n    joint_trajectory_controller:\n      type: joint_trajectory_controller/JointTrajectoryController\n"})}),"\n",(0,t.jsx)(e.h2,{id:"control-modes",children:"Control Modes"}),"\n",(0,t.jsx)(e.h3,{id:"position-control",children:"Position Control"}),"\n",(0,t.jsx)(e.p,{children:"Commands joint to specific angle:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:"from trajectory_msgs.msg import JointTrajectory, JointTrajectoryPoint\n\ntrajectory = JointTrajectory()\ntrajectory.joint_names = ['joint1']\npoint = JointTrajectoryPoint()\npoint.positions = [0.5]  # radians\npoint.time_from_start.sec = 1\ntrajectory.points = [point]\n\npub.publish(trajectory)\n"})}),"\n",(0,t.jsx)(e.h3,{id:"velocity-control",children:"Velocity Control"}),"\n",(0,t.jsx)(e.p,{children:"Commands joint velocity:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:"from std_msgs.msg import Float64\n\nmsg = Float64()\nmsg.data = 0.5  # rad/s\npub.publish(msg)\n"})}),"\n",(0,t.jsx)(e.h3,{id:"effort-control",children:"Effort Control"}),"\n",(0,t.jsx)(e.p,{children:"Commands joint torque:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:"from std_msgs.msg import Float64\n\nmsg = Float64()\nmsg.data = 10.0  # N\u22c5m\npub.publish(msg)\n"})}),"\n",(0,t.jsx)(e.h2,{id:"mobile-base-control",children:"Mobile Base Control"}),"\n",(0,t.jsx)(e.h3,{id:"differential-drive",children:"Differential Drive"}),"\n",(0,t.jsx)(e.p,{children:"Control a two-wheeled robot:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:"from geometry_msgs.msg import Twist\n\ncmd = Twist()\ncmd.linear.x = 0.5   # m/s forward\ncmd.angular.z = 0.2  # rad/s turn\n\npub.publish(cmd)\n"})}),"\n",(0,t.jsx)(e.h3,{id:"gazebo-plugin",children:"Gazebo Plugin"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-xml",children:'<gazebo>\n  <plugin name="differential_drive_controller" \n          filename="libgazebo_ros_diff_drive.so">\n    <ros>\n      <namespace>/</namespace>\n    </ros>\n    <left_joint>left_wheel_joint</left_joint>\n    <right_joint>right_wheel_joint</right_joint>\n    <wheel_separation>0.4</wheel_separation>\n    <wheel_diameter>0.2</wheel_diameter>\n    <max_wheel_torque>20</max_wheel_torque>\n    <max_wheel_acceleration>1.0</max_wheel_acceleration>\n    <command_topic>cmd_vel</command_topic>\n    <publish_odom>true</publish_odom>\n    <publish_odom_tf>true</publish_odom_tf>\n  </plugin>\n</gazebo>\n'})}),"\n",(0,t.jsx)(e.h2,{id:"manipulator-control",children:"Manipulator Control"}),"\n",(0,t.jsx)(e.h3,{id:"joint-trajectory-controller",children:"Joint Trajectory Controller"}),"\n",(0,t.jsx)(e.p,{children:"For multi-DOF arms:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-python",children:"from trajectory_msgs.msg import JointTrajectory, JointTrajectoryPoint\n\ntrajectory = JointTrajectory()\ntrajectory.joint_names = ['shoulder', 'elbow', 'wrist']\n\npoint = JointTrajectoryPoint()\npoint.positions = [0.5, 1.0, 0.3]\npoint.velocities = [0.0, 0.0, 0.0]\npoint.time_from_start.sec = 2\ntrajectory.points = [point]\n\npub.publish(trajectory)\n"})}),"\n",(0,t.jsx)(e.h2,{id:"chapter-projects",children:"Chapter Projects"}),"\n",(0,t.jsx)(e.h3,{id:"project-1-simple-joint-control",children:"Project 1: Simple Joint Control"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Control single joint via topic"}),"\n",(0,t.jsx)(e.li,{children:"Move joint through range of motion"}),"\n",(0,t.jsx)(e.li,{children:"Log joint state"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"project-2-ros2_control-setup",children:"Project 2: ros2_control Setup"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Configure ros2_control for robot"}),"\n",(0,t.jsx)(e.li,{children:"Launch controllers"}),"\n",(0,t.jsx)(e.li,{children:"Control joints via controllers"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"project-3-mobile-base-navigation",children:"Project 3: Mobile Base Navigation"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Control differential drive robot"}),"\n",(0,t.jsx)(e.li,{children:"Implement simple navigation (forward, turn, stop)"}),"\n",(0,t.jsx)(e.li,{children:"Monitor odometry"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"project-4-arm-manipulation",children:"Project 4: Arm Manipulation"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Control multi-DOF arm"}),"\n",(0,t.jsx)(e.li,{children:"Execute pick-and-place trajectory"}),"\n",(0,t.jsx)(e.li,{children:"Verify end-effector position"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"chapter-summary",children:"Chapter Summary"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Key Takeaways"}),":"]}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Joint control"})," can be direct (topics) or via ros2_control"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"ros2_control"})," provides standardized hardware abstraction"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Control modes"})," (position, velocity, effort) serve different purposes"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Mobile bases"})," use velocity commands (Twist messages)"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Manipulators"})," use trajectory controllers for coordinated motion"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"/docs/module2/module2-chapter3",children:"Chapter 3: Unity Integration"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"/docs/module2/",children:"Return to Module 2 Overview"})}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}},8453:(n,e,o)=>{o.d(e,{R:()=>l,x:()=>s});var r=o(6540);const t={},i=r.createContext(t);function l(n){const e=r.useContext(i);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:l(n.components),r.createElement(i.Provider,{value:e},n.children)}}}]);