"use strict";(globalThis.webpackChunkphysical_ai_robotics_book=globalThis.webpackChunkphysical_ai_robotics_book||[]).push([[442],{1061:(t,e,n)=>{n.r(e),n.d(e,{TextSelection:()=>m,default:()=>p});var o=n(6540);const i=[".theme-doc-markdown","article",".markdown",'[class*="docItemContainer"]','[class*="docMainContainer"]',"main","h1","h2","h3","h4","h5","h6",'[class*="heading"]'];function r(){return"ontouchstart"in window||navigator.maxTouchPoints>0}function s(t,e=1e3){return!t||t.length<=e?t:t.slice(0,e)+"..."}function a(){const[t,e]=(0,o.useState)(null),n=(0,o.useRef)(null),a=(0,o.useCallback)(()=>{e(null)},[]),c=(0,o.useCallback)(()=>{const t=window.getSelection();if(!t||t.isCollapsed)return!1;const n=t.toString().trim();if(!n||n.length<3)return!1;const o=t.anchorNode,a=o?.nodeType===Node.TEXT_NODE?o.parentElement:o;if(!function(t){if(!t)return!1;for(const n of i)try{if(t.matches&&t.matches(n))return!0}catch(e){}for(const n of i)try{if(t.closest&&t.closest(n))return!0}catch(e){}return!1}(a))return!1;if(function(t){if(!t)return!1;const e=["nav","header","footer",".navbar",".sidebar",".menu",".table-of-contents",".pagination-nav",'[class*="chatbot"]'];for(const n of e)if(t.closest(n))return!0;return!1}(a))return!1;const c=t.getRangeAt(0).getBoundingClientRect(),l=r(),u={x:c.left+c.width/2,y:l?c.bottom+10:c.top-10};return e({text:n,truncatedText:s(n),position:u,isWithinContentArea:!0}),!0},[]);return(0,o.useEffect)(()=>{const o=()=>{setTimeout(()=>{const t=window.getSelection();t&&!t.isCollapsed&&t.toString().trim()?r()&&c():r()},100)},i=t=>{r()||setTimeout(()=>{c()||e(null)},10)},s=t=>{setTimeout(()=>{c()},300)},a=n=>{if(t){if(n.target.closest("[data-ask-ai-button]"))return;e(null)}},l=()=>{t&&e(null)};return r()&&(n.current=setInterval(()=>{const t=window.getSelection();t&&!t.isCollapsed&&t.toString().trim().length>=3&&c()},500)),document.addEventListener("selectionchange",o),document.addEventListener("mouseup",i),document.addEventListener("touchend",s),document.addEventListener("mousedown",a),document.addEventListener("touchstart",a),window.addEventListener("scroll",l,!0),()=>{n.current&&clearInterval(n.current),document.removeEventListener("selectionchange",o),document.removeEventListener("mouseup",i),document.removeEventListener("touchend",s),document.removeEventListener("mousedown",a),document.removeEventListener("touchstart",a),window.removeEventListener("scroll",l,!0)}},[t,c]),{selection:t,clearSelection:a}}var c=n(4848);const l={position:"fixed",padding:"10px 16px",background:"#25c2a0",color:"white",border:"none",borderRadius:"20px",cursor:"pointer",fontSize:"14px",fontWeight:"600",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.25)",zIndex:10001,display:"flex",alignItems:"center",gap:"6px",transition:"transform 0.15s ease, box-shadow 0.15s ease",whiteSpace:"nowrap",minHeight:"44px",minWidth:"44px",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},u={transform:"scale(1.05)",boxShadow:"0 6px 16px rgba(0, 0, 0, 0.3)"};function d(){return(0,c.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:(0,c.jsx)("path",{d:"M12 0L14.59 9.41L24 12L14.59 14.59L12 24L9.41 14.59L0 12L9.41 9.41L12 0Z"})})}const h=function({position:t,onClick:e}){const[n,i]=o.useState(!1),r=t=>{t.preventDefault(),t.stopPropagation(),e()},s={...l,...n?u:{},left:Math.max(10,Math.min(t.x-50,window.innerWidth-100-10)),top:Math.max(10,Math.min(t.y,window.innerHeight-44-10))};return(0,c.jsxs)("button",{"data-ask-ai-button":!0,style:s,onClick:r,onTouchEnd:r,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),"aria-label":"Ask AI about selected text",type:"button",children:[(0,c.jsx)(d,{}),"Ask AI"]})};function m(){const{selection:t,clearSelection:e}=a(),n=(0,o.useCallback)(()=>{t&&(window.__chatbotSetContext&&window.__chatbotSetContext(t.text),window.getSelection()?.removeAllRanges(),e())},[t,e]);return t?(0,c.jsx)(h,{position:t.position,onClick:n}):null}const p=m}}]);