"use strict";(globalThis.webpackChunkphysical_ai_robotics_book=globalThis.webpackChunkphysical_ai_robotics_book||[]).push([[442],{1061:(e,t,n)=>{n.r(t),n.d(t,{TextSelection:()=>m,default:()=>p});var o=n(6540);const i=[".theme-doc-markdown","article",".markdown",'[class*="docItemContainer"]'];function r(){return"ontouchstart"in window||navigator.maxTouchPoints>0}function s(e,t=1e3){return!e||e.length<=t?e:e.slice(0,t)+"..."}function a(){const[e,t]=(0,o.useState)(null),n=(0,o.useRef)(null),a=(0,o.useCallback)(()=>{t(null)},[]),c=(0,o.useCallback)(()=>{const e=window.getSelection();if(!e||e.isCollapsed)return!1;const n=e.toString().trim();if(!n||n.length<3)return!1;const o=e.anchorNode,a=o?.nodeType===Node.TEXT_NODE?o.parentElement:o;if(!function(e){if(!e)return!1;for(const t of i)if(e.closest(t))return!0;return!1}(a))return!1;if(function(e){if(!e)return!1;const t=["nav","header","footer",".navbar",".sidebar",".menu",".table-of-contents",".pagination-nav",'[class*="chatbot"]'];for(const n of t)if(e.closest(n))return!0;return!1}(a))return!1;const c=e.getRangeAt(0).getBoundingClientRect(),u=r(),l={x:c.left+c.width/2,y:u?c.bottom+10:c.top-10};return t({text:n,truncatedText:s(n),position:l,isWithinContentArea:!0}),!0},[]);return(0,o.useEffect)(()=>{const o=()=>{setTimeout(()=>{const e=window.getSelection();e&&!e.isCollapsed&&e.toString().trim()?r()&&c():r()},100)},i=e=>{r()||setTimeout(()=>{c()||t(null)},10)},s=e=>{setTimeout(()=>{c()},300)},a=n=>{if(e){if(n.target.closest("[data-ask-ai-button]"))return;t(null)}},u=()=>{e&&t(null)};return r()&&(n.current=setInterval(()=>{const e=window.getSelection();e&&!e.isCollapsed&&e.toString().trim().length>=3&&c()},500)),document.addEventListener("selectionchange",o),document.addEventListener("mouseup",i),document.addEventListener("touchend",s),document.addEventListener("mousedown",a),document.addEventListener("touchstart",a),window.addEventListener("scroll",u,!0),()=>{n.current&&clearInterval(n.current),document.removeEventListener("selectionchange",o),document.removeEventListener("mouseup",i),document.removeEventListener("touchend",s),document.removeEventListener("mousedown",a),document.removeEventListener("touchstart",a),window.removeEventListener("scroll",u,!0)}},[e,c]),{selection:e,clearSelection:a}}var c=n(4848);const u={position:"fixed",padding:"10px 16px",background:"#25c2a0",color:"white",border:"none",borderRadius:"20px",cursor:"pointer",fontSize:"14px",fontWeight:"600",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.25)",zIndex:10001,display:"flex",alignItems:"center",gap:"6px",transition:"transform 0.15s ease, box-shadow 0.15s ease",whiteSpace:"nowrap",minHeight:"44px",minWidth:"44px",userSelect:"none",WebkitUserSelect:"none",WebkitTouchCallout:"none"},l={transform:"scale(1.05)",boxShadow:"0 6px 16px rgba(0, 0, 0, 0.3)"};function d(){return(0,c.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:(0,c.jsx)("path",{d:"M12 0L14.59 9.41L24 12L14.59 14.59L12 24L9.41 14.59L0 12L9.41 9.41L12 0Z"})})}const h=function({position:e,onClick:t}){const[n,i]=o.useState(!1),r=e=>{e.preventDefault(),e.stopPropagation(),t()},s={...u,...n?l:{},left:Math.max(10,Math.min(e.x-50,window.innerWidth-100-10)),top:Math.max(10,Math.min(e.y,window.innerHeight-44-10))};return(0,c.jsxs)("button",{"data-ask-ai-button":!0,style:s,onClick:r,onTouchEnd:r,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),"aria-label":"Ask AI about selected text",type:"button",children:[(0,c.jsx)(d,{}),"Ask AI"]})};function m(){const{selection:e,clearSelection:t}=a(),n=(0,o.useCallback)(()=>{e&&(window.__chatbotSetContext&&window.__chatbotSetContext(e.text),window.getSelection()?.removeAllRanges(),t())},[e,t]);return e?(0,c.jsx)(h,{position:e.position,onClick:n}):null}const p=m}}]);